{{define "finance_new_expense_content"}}
<!-- Header -->
<div class="header content-header">
    <img src="/static/logo/eighty-twenty-logo.png" alt="Eighty Twenty" class="app-logo" />
    <h1>New Expense</h1>
</div>

{{if .Error}}
<div style="background-color: #F8D7DA; border: 1px solid #F5C6CB; border-left: 4px solid #DC3545; padding: 15px; margin-bottom: 20px; border-radius: 4px; color: #721C24;">
    <strong>Error:</strong> {{.Error}}
</div>
{{end}}

<form method="POST" action="/finance/new-expense" id="expense-form">
    <div class="form-section">
        <h2>Expense Details</h2>
        
        <div class="form-row">
            <div class="form-group">
                <label for="transaction_date">Date *</label>
                <input type="date" id="transaction_date" name="transaction_date" value="{{.Today}}" max="{{.Today}}" required>
            </div>
            <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                    <option value="">Select category</option>
                    <option value="teacher_salary">Teacher Salary</option>
                    <option value="refund">Refund</option>
                    <option value="ads">Facebook Ads</option>
                    <option value="rent">Rent</option>
                    <option value="software">Software (Zoom, Trello, etc.)</option>
                    <option value="moderator">Moderator</option>
                    <option value="content_creator">Facebook Content Creator</option>
                    <option value="other">Other</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="amount">Amount (EGP) *</label>
                <input type="number" id="amount" name="amount" min="1" step="1" required>
            </div>
            <div class="form-group">
                <label for="payment_method">Payment Method *</label>
                <select id="payment_method" name="payment_method" required>
                    <option value="">Select method</option>
                    <option value="vodafone_cash">Vodafone Cash</option>
                    <option value="bank_transfer">Bank Transfer</option>
                    <option value="paypal">PayPal</option>
                    <option value="other">Other</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="notes">Notes</label>
            <textarea id="notes" name="notes" rows="3" placeholder="Optional notes about this expense..."></textarea>
        </div>
    </div>

    <div class="action-buttons" style="margin-top: 30px;">
        <button type="submit" class="btn btn-primary">Create Expense</button>
        <a href="/finance" class="btn btn-secondary">Cancel</a>
    </div>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set today as default date
    const dateInput = document.getElementById('transaction_date');
    if (dateInput && !dateInput.value) {
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
    }
});
</script>
{{end}}
